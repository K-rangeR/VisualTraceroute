<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Trace Route</title>
    </head>
    <body>
        <h1>Trace Route Version 0.0</h1>
        <div id="url">Connecting...</div>
        <ul id="results"></ul>
        <form id="inform" action="#" method="POST">
            <input type="text" id="hostname" placeholder="Enter host name">
            <input type="submit" id="btn" value="trace">
        </form>
        <script>
            window.onload = function() {
                var inform = document.getElementById("inform");
                var url = document.getElementById("url");
                var results = document.getElementById("results");
                var hostnameField = document.getElementById("hostname");

                var socket = new WebSocket("ws://localhost:8080/");
                socket.onopen = function(event) {
                    url.innerHTML = event.currentTarget.url;
                };
                socket.onerror = function(error) {
                    url.innerHTML = error;
                };
                socket.onmessage = function(event) {
                    results.innerHTML += "<li>" + event.data + "</li>";
                };
                socket.onclose = function(event) {
                    url.innerHTML = "Connection is now closed";
                    hostnameField.value = "";
                };

                inform.onsubmit = function(event) {
                    event.preventDefault();
                    results.innerHTML = "";
                    socket.send(hostnameField.value);
                };
            };
        </script>
    </body>
</html>
